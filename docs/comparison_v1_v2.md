# v2とv1の違い

データセット収集、作成部には変更はない。  
分類器の学習については互換性のない変更が行われた。

## 特徴抽出器と分類器の完全分離

v1ではCNNのみを用いて分類を行っていた。  
事前学習済みのCNNに対し、全結合層の手前までの重みを固定して全結合層の重みだけを再学習していたが、これは実質的に  

* 事前学習済みCNNの全結合層の手前の層の出力を、画像に対する特徴量とみなしている
* 画像の特徴量を使って多層パーセプトロンの分類器を学習させている

ことになる。  
入力が画像、出力がラベルのCNNとして再学習させていたため、再学習時には画像特徴量出力部は変化しないにもかかわらず、同じ画像の特徴量を何度も計算する処理が行われ、不必要に時間がかかっていた。

v2では、画像を入力して特徴量(ベクトル)を出力するモデルと、ベクトルを入力してラベルを出力するモデルを完全に分離した。  
分類器の学習では1度計算した画像特徴量を使い回せる構成になったため、学習速度が大幅に向上した。また、今回は分類器を差し替えることが可能になったため、SVMなどより学習の速い分類器を使用し、速度をさらに向上させる余地がある。

## CNNモデルの変更

v2で導入されたCNNモデルはv1のモデルよりも精度が大幅に高く、計算コストも現実的な範囲に収まっている。  
v1のモデルは使用する価値がなくなっためため削除された。

## chainerバージョンの更新

chainer 1系を前提としたコードから、2系以降前提、3系で動作確認済みのコードに変更した。
